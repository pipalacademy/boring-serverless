# change this - path to hamr installation
<Directory "/home/dev/hamr">
    Require all granted

    Options +ExecCGI
    AddHandler cgi-script .cgi
</Directory>

<VirtualHost *:80>
    # change this - hostname for API and user apps
    ServerAlias localhost *.localhost *.rajdhani.example.com

    # change this to hamr location
    Define HAMR_DIR "/home/dev/hamr"

    SetEnvIf Host "^([^.]*).*$" SUBDOMAIN=$1

    VirtualDocumentRoot "${HAMR_DIR}/apps/%1/site"

    RewriteEngine On

    RewriteCond "${HAMR_DIR}/apps/%{ENV:SUBDOMAIN}/site" !-d
    RewriteRule ^/public/(.*)$ "${HAMR_DIR}/apps/%{ENV:SUBDOMAIN}/public/$1" [L]

    RewriteCond "${HAMR_DIR}/apps/%{ENV:SUBDOMAIN}/site" !-d
    RewriteRule ^(.*)$ "${HAMR_DIR}/hamr.cgi/$1" [L]
</VirtualHost>
